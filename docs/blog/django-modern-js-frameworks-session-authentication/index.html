<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://malnossi.github.io/bulma.min.css">
    <link rel="stylesheet" href="https://malnossi.github.io/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnapp.websitepolicies.net/widgets/cookies/mzad7vzz.js" defer></script>
    <title>
Mohamed Nossirat | Django &amp; Modern JS Frameworks Session Authentication
</title>
</head>

<body>
    <nav class="navbar" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
        <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
    </div>

    <div class="navbar-menu" id="navbarBasicExample">
        <div class="navbar-end">
            <a class="navbar-item" href="/">Home</a>
            
            
                
                <a class="navbar-item" href="https://malnossi.github.io/blog/"> Blog</a>
            
        </div>
    </div>
    </div>

    <div class="navbar-end">
    </div>
    </div>
</nav>
<script>
    document.addEventListener('DOMContentLoaded', () => {
    
      // Get all "navbar-burger" elements
      const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);
    
      // Add a click event on each of them
      $navbarBurgers.forEach( el => {
        el.addEventListener('click', () => {
    
          // Get the target from the "data-target" attribute
          const target = el.dataset.target;
          const $target = document.getElementById(target);
    
          // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
          el.classList.toggle('is-active');
          $target.classList.toggle('is-active');
    
        });
      });
    
    });
      </script>
    
    
<div class="section">
    <div class="card">
        <div class="card-image">
          <figure class="image is-16by9">
            <img
              src="/django-session.webp"
              alt="Placeholder image"
            />
          </figure>
        </div>
        <div class="card-content">
            <div class="level">
                <div class="level-item has-text-centered">
                    <div>
                        <h1 class="heading is-size-5"><strong>Django &amp; Modern JS Frameworks Session Authentication</strong></h1>
                        <div class="tags is-flex is-justify-content-center">
                            
                            <a class="tag is-link is-hoverable" href="/tags/django">#Django</a>
                            
                            <a class="tag is-link is-hoverable" href="/tags/web">#Web</a>
                            
                            <a class="tag is-link is-hoverable" href="/tags/javascript">#Javascript</a>
                            
                            <a class="tag is-link is-hoverable" href="/tags/python">#Python</a>
                            
                        </div>
                    </div>
                </div>
            </div>
          <div class="media">
            <div class="media-content">
              <span class="title is-size-6">Mohamed AL NOSSIRAT</span> |
              <time datetime="2024-10-11">11&#x2F;10&#x2F;2024</time>
              <hr/>
            </div>
            
          </div>
          <div class="content has-text-justified">
            <h2 id="introduction">Introduction</h2>
<p>When building a single-page application (SPA) with Django &amp; Django Rest Framework (DRF) alongside frameworks like React, Vue, or Angular, a common question developers face is: " <em>How should I handle authentication ?</em> "</p>
<p>Several options are available:</p>
<ul>
<li>JSON Web Tokens (JWT)</li>
<li>Django REST Framework's TokenAuthentication</li>
</ul>
<p>This can be confusing, even for experienced developers.</p>
<p>However, I'd like to suggest a simpler alternative: just use Django’s built-in authentication system.</p>
<blockquote>
<p><strong>Disclaimer: I am not a security expert, and this article does not provide any security advice. For guidance tailored to your specific needs, please reach out to a qualified security professional.</strong></p>
</blockquote>
<h2 id="json-web-tokens-jwt">JSON Web Tokens (JWT)</h2>
<p><a href="https://auth0.com/learn/json-web-tokens/">JWT (JSON Web Token)</a> is a widely-used method for API authentication. If you're building a modern web application with Vue.js or React on the frontend and Django Rest Framework (DRF) on the backend, it's likely you'll consider JWT as a top option for implementing authentication.</p>
<p>However, JWT is just one approach, and it's neither the simplest nor the most reliable. It isn’t supported natively by Django Rest Framework, which means you'll need extra libraries and configuration to set it up in your project.</p>
<p>Additionally, implementing JWT securely can be quite challenging due to its complex design. As <a href="https://groups.google.com/g/django-developers/c/6oS9R2GwO4k/m/Rep92xfsAwAJ">James Bennet</a>, a long-time Django project contributor, puts it:</p>
<blockquote>
<p><em>"JWT is over-complex, puts too much power in the attacker's hands, has too many configuration knobs, and makes poor cryptographic choices. This is why we see vulnerabilities in JWT libraries and JWT-using systems again and again and again."</em></p>
</blockquote>
<p>Here is some examples of <a href="https://auth0.com/blog/critical-vulnerabilities-in-json-web-token-libraries/">JWT vulnerabilities</a> found in the wild.</p>
<p>So on every request, we send the JWT via an HTTP header:</p>
<pre data-lang="txt" style="background-color:#2b303b;color:#c0c5ce;" class="language-txt "><code class="language-txt" data-lang="txt"><span>Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.dfJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTC2JjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
</span></code></pre>
<p>We may not understand every technical aspect of JWTs, but the general idea is simple: a server issues a token, we include it in each request, and it grants us access to protected resources like <code>/api/something</code>.</p>
<p>However, storing this token for repeated use poses a challenge. While native mobile apps offer secure storage options, web browsers rely on <code>localStorage</code> or <code>sessionStorage</code> both of which are insecure.</p>
<p>These storage options are vulnerable to cross-site scripting (XSS) attacks. The only safe option in browsers is using cookies, although non-HTTP cookies (like those accessible via document.cookie) remain insecure since scripts can still read them. Storing JWTs in cookies might help, but it doesn't address deeper issues with JWTs.</p>
<p>The most significant concern is that once a JWT is intercepted, it is <a href="https://owasp.org/www-chapter-vancouver/assets/presentations/2020-01_Attacking_and_Securing_JWT.pdf">vulnerable to brute-force attacks</a>. For this reason, JWTs are best used as a short-term solution to acquire something more secure, such as a session ID or OAuth access token, which should be stored in cookies.</p>
<p>Another major drawback of JWTs is that they cannot be easily invalidated. This creates challenges in handling situations like:</p>
<ul>
<li>Logging out</li>
<li>Compromised accounts</li>
<li>Password changes</li>
<li>Permission updates</li>
<li>User de-provisioning</li>
</ul>
<p>If you choose to use JWTs, ensure they are short-lived and promptly exchanged for a more secure method of authentication.</p>
<h2 id="django-rest-framework-s-tokenauthentication">Django REST Framework's TokenAuthentication</h2>
<p><a href="https://www.django-rest-framework.org/">Django REST Framework</a> includes a built-in <a href="https://www.django-rest-framework.org/api-guide/authentication/#tokenauthentication">TokenAuthentication</a> mechanism that generates unique tokens for each user and issues them through the built-in view <code>rest_framework.authtoken.views.obtain_auth_token</code>.</p>
<p>When authentication is successful, this view returns a JSON response with the token, which can be sent in an HTTP header like this:</p>
<pre data-lang="txt" style="background-color:#2b303b;color:#c0c5ce;" class="language-txt "><code class="language-txt" data-lang="txt"><span>Authorization:token 9944b09199c62bcf9418ad846dd0e4bbdfc6ee4b
</span></code></pre>
<p>While this method works, we face the same challenge in a browser environment: where do we securely store this token ?</p>
<p>If only Django provided a secure token stored in cookies for use in every request ?</p>
<p><em><strong>The good news is that if you can control the domain of both your backend and your frontend, you can use a much simpler method: Django sessions.</strong></em></p>
<h2 id="poject-setup">Poject Setup</h2>
<p>Create a new Django project</p>
<h3 id="backend">Backend</h3>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">mkdir -p ~</span><span>/django-session-app
</span><span style="color:#96b5b4;">cd </span><span style="color:#bf616a;">~</span><span>/django-session-app
</span><span style="color:#bf616a;">mkdir</span><span> server
</span><span style="color:#96b5b4;">cd</span><span> server
</span><span style="color:#bf616a;">python3 -m</span><span> venv venv
</span><span style="color:#96b5b4;">source</span><span> venv/bin/activate
</span><span>(</span><span style="color:#bf616a;">venv</span><span>) pip install django djangorestframework django-cors-headers
</span><span>(</span><span style="color:#bf616a;">venv</span><span>) django-admin startproject config .
</span><span>(</span><span style="color:#bf616a;">venv</span><span>) python manage.py createsuperuser </span><span style="color:#65737e;"># create your superuser for me --username:admin --password:admin
</span><span>(</span><span style="color:#bf616a;">venv</span><span>) touch Dockerfile
</span></code></pre>
<p>Folder structure</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">server/
</span><span style="color:#bf616a;">├──</span><span> config
</span><span style="color:#bf616a;">│</span><span>   ├── asgi.py
</span><span style="color:#bf616a;">│</span><span>   ├── __init__.py
</span><span style="color:#bf616a;">│</span><span>   ├── settings.py
</span><span style="color:#bf616a;">│</span><span>   ├── urls.py
</span><span style="color:#bf616a;">│</span><span>   └── wsgi.py
</span><span style="color:#bf616a;">├──</span><span> Dockerfile
</span><span style="color:#bf616a;">├──</span><span> manage.py
</span><span style="color:#bf616a;">└──</span><span> requirements.txt
</span><span>
</span><span style="color:#bf616a;">2</span><span> directories, 12 files
</span><span>
</span></code></pre>
<h4 id="dockerfile">Dockerfile</h4>
<pre data-lang="dockerfile" style="background-color:#2b303b;color:#c0c5ce;" class="language-dockerfile "><code class="language-dockerfile" data-lang="dockerfile"><span style="color:#65737e;"># pull official base image
</span><span style="color:#b48ead;">FROM</span><span> python:3.12-slim-bullseye
</span><span>
</span><span style="color:#65737e;"># set work directory
</span><span style="color:#b48ead;">WORKDIR </span><span>/app
</span><span>
</span><span style="color:#65737e;"># set environment variables
</span><span style="color:#b48ead;">ENV </span><span>PYTHONDONTWRITEBYTECODE 1
</span><span style="color:#b48ead;">ENV </span><span>PYTHONUNBUFFERED 1
</span><span>
</span><span style="color:#65737e;"># install dependencies
</span><span style="color:#b48ead;">RUN </span><span>pip install --upgrade pip
</span><span style="color:#b48ead;">COPY</span><span> ./requirements.txt .
</span><span style="color:#b48ead;">RUN </span><span>pip install -r requirements.txt
</span><span>
</span><span style="color:#65737e;"># copy project
</span><span style="color:#b48ead;">COPY</span><span> . .
</span></code></pre>
<p>server's <code>requirements.txt</code></p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">asgiref</span><span>=</span><span style="color:#a3be8c;">=3.8.1
</span><span style="color:#bf616a;">Django</span><span>=</span><span style="color:#a3be8c;">=5.1.1
</span><span style="color:#bf616a;">django-cors-headers</span><span>=</span><span style="color:#a3be8c;">=4.4.0
</span><span style="color:#bf616a;">djangorestframework</span><span>=</span><span style="color:#a3be8c;">=3.15.2
</span><span style="color:#bf616a;">sqlparse</span><span>=</span><span style="color:#a3be8c;">=0.5.1
</span></code></pre>
<h3 id="frontend">Frontend</h3>
<p>For this example I will use Vuejs with Vuetify to get some styled components, you can do the same thing with React, Angular, Svelte etc...</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">npm</span><span> create vuetify@latest
</span></code></pre>
<p>follow the instructions to scaffold a new vuetify project</p>
<p>Folder structure</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">frontend/
</span><span style="color:#bf616a;">├──</span><span> index.html
</span><span style="color:#bf616a;">├──</span><span> jsconfig.json
</span><span style="color:#bf616a;">├──</span><span> package.json
</span><span style="color:#bf616a;">├──</span><span> pnpm-lock.yaml
</span><span style="color:#bf616a;">├──</span><span> public
</span><span style="color:#bf616a;">│</span><span>   └── favicon.ico
</span><span style="color:#bf616a;">├──</span><span> README.md
</span><span style="color:#bf616a;">├──</span><span> src
</span><span style="color:#bf616a;">│</span><span>   ├── App.vue
</span><span style="color:#bf616a;">│</span><span>   ├── assets
</span><span style="color:#bf616a;">│</span><span>   │   ├── logo.png
</span><span style="color:#bf616a;">│</span><span>   │   └── logo.svg
</span><span style="color:#bf616a;">│</span><span>   ├── components
</span><span style="color:#bf616a;">│</span><span>   │   ├── AppFooter.vue
</span><span style="color:#bf616a;">│</span><span>   │   ├── HelloWorld.vue
</span><span style="color:#bf616a;">│</span><span>   │   └── README.md
</span><span style="color:#bf616a;">│</span><span>   ├── main.js
</span><span style="color:#bf616a;">│</span><span>   └── plugins
</span><span style="color:#bf616a;">│</span><span>       ├── index.js
</span><span style="color:#bf616a;">│</span><span>       ├── README.md
</span><span style="color:#bf616a;">│</span><span>       └── vuetify.js
</span><span style="color:#bf616a;">└──</span><span> vite.config.mjs
</span><span>
</span><span style="color:#bf616a;">5</span><span> directories, 17 files
</span></code></pre>
<h2 id="login-view">Login View</h2>
<pre data-lang="html" style="background-color:#2b303b;color:#c0c5ce;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#bf616a;">template</span><span>&gt;
</span><span>  &lt;</span><span style="color:#bf616a;">v-app</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">v-main</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">v-container </span><span style="color:#d08770;">class</span><span>=&quot;</span><span style="color:#a3be8c;">fill-height</span><span>&quot;&gt;
</span><span>        &lt;</span><span style="color:#bf616a;">v-row </span><span style="color:#d08770;">justify</span><span>=&quot;</span><span style="color:#a3be8c;">center</span><span>&quot;&gt;
</span><span>          &lt;</span><span style="color:#bf616a;">v-col </span><span style="color:#d08770;">cols</span><span>=&quot;</span><span style="color:#a3be8c;">12</span><span>&quot; </span><span style="color:#d08770;">md</span><span>=&quot;</span><span style="color:#a3be8c;">3</span><span>&quot;&gt;
</span><span>            &lt;</span><span style="color:#bf616a;">v-card</span><span>&gt;
</span><span>              &lt;</span><span style="color:#bf616a;">v-card-text</span><span>&gt;
</span><span>                &lt;</span><span style="color:#bf616a;">v-form </span><span style="color:#d08770;">@submit.prevent</span><span>=&quot;</span><span style="color:#a3be8c;">login</span><span>&quot;&gt;
</span><span>                  &lt;</span><span style="color:#bf616a;">v-text-field </span><span style="color:#d08770;">v-model</span><span>=&quot;</span><span style="color:#a3be8c;">credentials.username</span><span>&quot; </span><span style="color:#d08770;">variant</span><span>=&quot;</span><span style="color:#a3be8c;">outlined</span><span>&quot; </span><span style="color:#d08770;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Username</span><span>&quot;&gt;&lt;/</span><span style="color:#bf616a;">v-text-field</span><span>&gt;
</span><span>                  &lt;</span><span style="color:#bf616a;">v-text-field </span><span style="color:#d08770;">v-model</span><span>=&quot;</span><span style="color:#a3be8c;">credentials.password</span><span>&quot; </span><span style="color:#d08770;">variant</span><span>=&quot;</span><span style="color:#a3be8c;">outlined</span><span>&quot; </span><span style="color:#d08770;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Password</span><span>&quot;&gt;&lt;/</span><span style="color:#bf616a;">v-text-field</span><span>&gt;
</span><span>                  &lt;</span><span style="color:#bf616a;">v-btn </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">submit</span><span>&quot; </span><span style="color:#d08770;">block color</span><span>=&quot;</span><span style="color:#a3be8c;">primary</span><span>&quot;&gt;Login&lt;/</span><span style="color:#bf616a;">v-btn</span><span>&gt;
</span><span>                &lt;/</span><span style="color:#bf616a;">v-form</span><span>&gt;
</span><span>              &lt;/</span><span style="color:#bf616a;">v-card-text</span><span>&gt;
</span><span>            &lt;/</span><span style="color:#bf616a;">v-card</span><span>&gt;
</span><span>          &lt;/</span><span style="color:#bf616a;">v-col</span><span>&gt;
</span><span>        &lt;/</span><span style="color:#bf616a;">v-row</span><span>&gt;
</span><span>      &lt;/</span><span style="color:#bf616a;">v-container</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">v-main</span><span>&gt;
</span><span>  &lt;/</span><span style="color:#bf616a;">v-app</span><span>&gt;
</span><span>&lt;/</span><span style="color:#bf616a;">template</span><span>&gt;
</span><span>
</span><span>&lt;</span><span style="color:#bf616a;">script </span><span style="color:#d08770;">setup</span><span>&gt;
</span><span style="color:#b48ead;">import </span><span>{ </span><span style="color:#bf616a;">reactive </span><span>} </span><span style="color:#b48ead;">from </span><span>&#39;</span><span style="color:#a3be8c;">vue</span><span>&#39;;
</span><span>
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">credentials </span><span>= </span><span style="color:#bf616a;">reactive</span><span>({ username: &quot;&quot;, password: &quot;&quot; })
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">login </span><span>= () </span><span style="color:#b48ead;">=&gt; </span><span>{
</span><span>  </span><span style="color:#bf616a;">fetch</span><span>(&quot;</span><span style="color:#a3be8c;">/api/login/</span><span>&quot;,
</span><span>    {
</span><span>      method: &quot;</span><span style="color:#a3be8c;">POST</span><span>&quot;,
</span><span>      headers: {
</span><span>        &quot;</span><span style="color:#a3be8c;">Content-Type</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">application/json</span><span>&quot;,
</span><span>      },
</span><span>      body: JSON.</span><span style="color:#96b5b4;">stringify</span><span>(</span><span style="color:#bf616a;">credentials</span><span>)
</span><span>    }
</span><span>  )
</span><span>  .</span><span style="color:#bf616a;">then</span><span>(response</span><span style="color:#b48ead;">=&gt;</span><span style="color:#bf616a;">response</span><span>.</span><span style="color:#bf616a;">json</span><span>())
</span><span>  .</span><span style="color:#bf616a;">then</span><span>(data</span><span style="color:#b48ead;">=&gt;</span><span>console.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">data</span><span>))
</span><span>}
</span><span>&lt;/</span><span style="color:#bf616a;">script</span><span>&gt;
</span></code></pre>
<h4 id="dockerfile-1">Dockerfile</h4>
<pre data-lang="dockerfile" style="background-color:#2b303b;color:#c0c5ce;" class="language-dockerfile "><code class="language-dockerfile" data-lang="dockerfile"><span style="color:#b48ead;">FROM</span><span> node:lts-alpine
</span><span>
</span><span style="color:#65737e;"># install simple http server for serving static content
</span><span style="color:#b48ead;">RUN </span><span>npm install -g pnpm
</span><span>
</span><span style="color:#65737e;"># make the &#39;app&#39; folder the current working directory
</span><span style="color:#b48ead;">WORKDIR </span><span>/app
</span><span>
</span><span style="color:#65737e;"># copy both &#39;package.json&#39; and &#39;package-lock.json&#39; (if available)
</span><span style="color:#b48ead;">COPY</span><span> package*.json ./
</span><span>
</span><span style="color:#65737e;"># install project dependencies
</span><span style="color:#b48ead;">RUN </span><span>pnpm install
</span><span>
</span><span style="color:#65737e;"># copy project files and folders to the current working directory (i.e. &#39;app&#39; folder)
</span><span style="color:#b48ead;">COPY</span><span> . .
</span></code></pre>
<h2 id="nginx">Nginx</h2>
<p>I will use Nginx to reverse-proxy the server and the frontend, so the domain of the setup is the same for both.</p>
<h4 id="dockerfile-2">Dockerfile</h4>
<pre data-lang="dockerfile" style="background-color:#2b303b;color:#c0c5ce;" class="language-dockerfile "><code class="language-dockerfile" data-lang="dockerfile"><span style="color:#b48ead;">FROM</span><span> nginx:1.25
</span><span>
</span><span style="color:#b48ead;">RUN </span><span>rm /etc/nginx/conf.d/default.conf
</span><span style="color:#b48ead;">COPY</span><span> nginx.conf /etc/nginx/conf.d
</span></code></pre>
<h4 id="nginx-config-file">Nginx config file</h4>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">upstream</span><span> server {
</span><span>    server server:8000;
</span><span>}
</span><span>
</span><span style="color:#bf616a;">upstream</span><span> client {
</span><span>    server frontend:3000;
</span><span>}
</span><span>
</span><span>
</span><span style="color:#bf616a;">server </span><span>{
</span><span>
</span><span>    listen 80;
</span><span>    server_name django-session-app.localhost;
</span><span>
</span><span>    location / {
</span><span>        proxy_pass http://client;
</span><span>        proxy_set_header X-Forwarded-For $</span><span style="color:#bf616a;">proxy_add_x_forwarded_for</span><span>;
</span><span>        proxy_set_header Host $</span><span style="color:#bf616a;">host</span><span>;
</span><span>        proxy_redirect off;
</span><span>        proxy_http_version 1.1;
</span><span>        proxy_set_header Upgrade $</span><span style="color:#bf616a;">http_upgrade</span><span>;
</span><span>        proxy_set_header Connection &quot;</span><span style="color:#a3be8c;">Upgrade</span><span>&quot;;
</span><span>    }
</span><span>
</span><span>    location /api/ {
</span><span>        proxy_pass http://server;
</span><span>        proxy_set_header X-Forwarded-For $</span><span style="color:#bf616a;">proxy_add_x_forwarded_for</span><span>;
</span><span>        proxy_set_header Host $</span><span style="color:#bf616a;">host</span><span>;
</span><span>        proxy_redirect off;
</span><span>    }
</span><span>    location /static/ {
</span><span>        proxy_pass http://server;
</span><span>    }
</span><span>
</span><span>}
</span></code></pre>
<h2 id="docker-compose-file">Docker Compose File</h2>
<pre data-lang="yml" style="background-color:#2b303b;color:#c0c5ce;" class="language-yml "><code class="language-yml" data-lang="yml"><span style="color:#bf616a;">services</span><span>:
</span><span>  </span><span style="color:#bf616a;">server</span><span>:
</span><span>    </span><span style="color:#bf616a;">container_name</span><span>: </span><span style="color:#a3be8c;">server
</span><span>    </span><span style="color:#bf616a;">build</span><span>: </span><span style="color:#a3be8c;">./server
</span><span>    </span><span style="color:#bf616a;">command</span><span>: </span><span style="color:#a3be8c;">python manage.py runserver 0.0.0.0:8000
</span><span>    </span><span style="color:#bf616a;">expose</span><span>:
</span><span>      - </span><span style="color:#d08770;">8000
</span><span>    </span><span style="color:#bf616a;">volumes</span><span>:
</span><span>      - </span><span style="color:#a3be8c;">./server:/app/
</span><span>  </span><span style="color:#bf616a;">frontend</span><span>:
</span><span>    </span><span style="color:#bf616a;">container_name</span><span>: </span><span style="color:#a3be8c;">frontend
</span><span>    </span><span style="color:#bf616a;">build</span><span>: </span><span style="color:#a3be8c;">./frontend
</span><span>    </span><span style="color:#bf616a;">command</span><span>: </span><span style="color:#a3be8c;">pnpm dev --host
</span><span>    </span><span style="color:#bf616a;">expose</span><span>:
</span><span>      - </span><span style="color:#d08770;">3000
</span><span>    </span><span style="color:#bf616a;">volumes</span><span>:
</span><span>      - </span><span style="color:#a3be8c;">./frontend:/app/
</span><span>      - </span><span style="color:#a3be8c;">/app/node_modules
</span><span>  </span><span style="color:#bf616a;">nginx</span><span>:
</span><span>    </span><span style="color:#bf616a;">container_name</span><span>: </span><span style="color:#a3be8c;">reverse_proxy
</span><span>    </span><span style="color:#bf616a;">build</span><span>: </span><span style="color:#a3be8c;">./nginx
</span><span>    </span><span style="color:#bf616a;">ports</span><span>:
</span><span>      - </span><span style="color:#a3be8c;">80:80
</span></code></pre>
<h2 id="build-and-run-the-docker-compose">Build and run the docker compose</h2>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">docker</span><span> compose build &amp;&amp; </span><span style="color:#bf616a;">docker</span><span> compose up</span><span style="color:#bf616a;"> -d
</span></code></pre>
<p>gand then go to <a href="http://django-session-app.localhost">http://django-session-app.localhost</a></p>
<h2 id="django-rest-framework-settings">Django Rest Framework settings</h2>
<p>Django Rest Framework comes with built-in session based authentication. To use it you have to add this in your Django settings module:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#bf616a;">INSTALLED_APPS </span><span>= [
</span><span>    </span><span style="color:#d08770;">...
</span><span>    &quot;</span><span style="color:#a3be8c;">rest_framework</span><span>&quot;
</span><span>]
</span><span style="color:#bf616a;">REST_FRAMEWORK </span><span>= {
</span><span>    &#39;</span><span style="color:#a3be8c;">DEFAULT_AUTHENTICATION_CLASSES</span><span>&#39;: [
</span><span>        &#39;</span><span style="color:#a3be8c;">rest_framework.authentication.SessionAuthentication</span><span>&#39;,
</span><span>    ],
</span><span>    &#39;</span><span style="color:#a3be8c;">DEFAULT_PERMISSION_CLASSES</span><span>&#39;: [
</span><span>        &#39;</span><span style="color:#a3be8c;">rest_framework.permissions.IsAuthenticated</span><span>&#39;,
</span><span>    ],
</span><span>}
</span></code></pre>
<p>Remember that authentication deals with recognizing the users that are connecting to your API, while permissions deals with giving access to some resources to the users.</p>
<p>In the <code>DEFAULT_AUTHENTICATION_CLASSES</code> list you are configuring only the good old Django sessions to authenticate users. In the <code>DEFAULT_PERMISSION_CLASSES</code> list you are requiring that only authenticated users will access your endpoints.</p>
<p>Django sessions are based by default on a session cookie stored on the client. There's no need for a "Token", an "Authorization" header or something like that.
If you can store that session cookie on the client and send it on every request to your API you will authenticate the user.</p>
<h2 id="django-rest-framework-authentication-endpoint">Django Rest Framework authentication endpoint</h2>
<p>Now it's time to write a very simple view to let the users authenticate with a username/password.</p>
<p>We'll need a serializer that will take the username and password from the request and will perform the actual authentication using Django authenication framework.</p>
<p>Create a serializers.py file in your app and add this code to it:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>django.contrib.auth </span><span style="color:#b48ead;">import </span><span>authenticate
</span><span>
</span><span style="color:#b48ead;">from </span><span>rest_framework </span><span style="color:#b48ead;">import </span><span>serializers
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">LoginSerializer</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">serializers.Serializer</span><span style="color:#eff1f5;">):
</span><span>    </span><span style="color:#65737e;">&quot;&quot;&quot;
</span><span style="color:#65737e;">    This serializer defines two fields for authentication:
</span><span style="color:#65737e;">      * username
</span><span style="color:#65737e;">      * password.
</span><span style="color:#65737e;">    It will try to authenticate the user with when validated.
</span><span style="color:#65737e;">    &quot;&quot;&quot;
</span><span>    username = serializers.</span><span style="color:#bf616a;">CharField</span><span>(
</span><span>        </span><span style="color:#bf616a;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Username</span><span>&quot;,
</span><span>        </span><span style="color:#bf616a;">write_only</span><span>=</span><span style="color:#d08770;">True
</span><span>    )
</span><span>    password = serializers.</span><span style="color:#bf616a;">CharField</span><span>(
</span><span>        </span><span style="color:#bf616a;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Password</span><span>&quot;,
</span><span>        </span><span style="color:#65737e;"># This will be used when the DRF browsable API is enabled
</span><span>        </span><span style="color:#bf616a;">style</span><span>={&#39;</span><span style="color:#a3be8c;">input_type</span><span>&#39;: &#39;</span><span style="color:#a3be8c;">password</span><span>&#39;},
</span><span>        </span><span style="color:#bf616a;">trim_whitespace</span><span>=</span><span style="color:#d08770;">False</span><span>,
</span><span>        </span><span style="color:#bf616a;">write_only</span><span>=</span><span style="color:#d08770;">True
</span><span>    )
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">validate</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">attrs</span><span>):
</span><span>        </span><span style="color:#65737e;"># Take username and password from request
</span><span>        username = attrs.</span><span style="color:#bf616a;">get</span><span>(&#39;</span><span style="color:#a3be8c;">username</span><span>&#39;)
</span><span>        password = attrs.</span><span style="color:#bf616a;">get</span><span>(&#39;</span><span style="color:#a3be8c;">password</span><span>&#39;)
</span><span>
</span><span>        </span><span style="color:#b48ead;">if </span><span>username and password:
</span><span>            </span><span style="color:#65737e;"># Try to authenticate the user using Django auth framework.
</span><span>            user = </span><span style="color:#bf616a;">authenticate</span><span>(</span><span style="color:#bf616a;">request</span><span>=</span><span style="color:#bf616a;">self</span><span>.context.</span><span style="color:#bf616a;">get</span><span>(&#39;</span><span style="color:#a3be8c;">request</span><span>&#39;),
</span><span>                                </span><span style="color:#bf616a;">username</span><span>=username, </span><span style="color:#bf616a;">password</span><span>=password)
</span><span>            </span><span style="color:#b48ead;">if </span><span>not user:
</span><span>                </span><span style="color:#65737e;"># If we don&#39;t have a regular user, raise a ValidationError
</span><span>                msg = &#39;</span><span style="color:#a3be8c;">Access denied: wrong username or password.</span><span>&#39;
</span><span>                </span><span style="color:#b48ead;">raise </span><span>serializers.</span><span style="color:#bf616a;">ValidationError</span><span>(msg, </span><span style="color:#bf616a;">code</span><span>=&#39;</span><span style="color:#a3be8c;">authorization</span><span>&#39;)
</span><span>        </span><span style="color:#b48ead;">else</span><span>:
</span><span>            msg = &#39;</span><span style="color:#a3be8c;">Both &quot;username&quot; and &quot;password&quot; are required.</span><span>&#39;
</span><span>            </span><span style="color:#b48ead;">raise </span><span>serializers.</span><span style="color:#bf616a;">ValidationError</span><span>(msg, </span><span style="color:#bf616a;">code</span><span>=&#39;</span><span style="color:#a3be8c;">authorization</span><span>&#39;)
</span><span>        </span><span style="color:#65737e;"># We have a valid user, put it in the serializer&#39;s validated_data.
</span><span>        </span><span style="color:#65737e;"># It will be used in the view.
</span><span>        attrs[&#39;</span><span style="color:#a3be8c;">user</span><span>&#39;] = user
</span><span>        </span><span style="color:#b48ead;">return </span><span>attrs
</span></code></pre>
<p>Then we can use this serializer in a login view. Add this to your views.py file:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>rest_framework </span><span style="color:#b48ead;">import </span><span>permissions
</span><span style="color:#b48ead;">from </span><span>rest_framework </span><span style="color:#b48ead;">import </span><span>views
</span><span style="color:#b48ead;">from </span><span>rest_framework.response </span><span style="color:#b48ead;">import </span><span>Response
</span><span>
</span><span style="color:#b48ead;">from . import </span><span>serializers
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">LoginView</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">views.APIView</span><span style="color:#eff1f5;">):
</span><span>    </span><span style="color:#65737e;"># This view should be accessible also for unauthenticated users.
</span><span>    permission_classes = (permissions.AllowAny,)
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">post</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">request</span><span>, </span><span style="color:#bf616a;">format</span><span>=</span><span style="color:#d08770;">None</span><span>):
</span><span>        serializer = serializers.</span><span style="color:#bf616a;">LoginSerializer</span><span>(</span><span style="color:#bf616a;">data</span><span>=</span><span style="color:#bf616a;">self</span><span>.request.data,
</span><span>            </span><span style="color:#bf616a;">context</span><span>={ &#39;</span><span style="color:#a3be8c;">request</span><span>&#39;: </span><span style="color:#bf616a;">self</span><span>.request })
</span><span>        serializer.</span><span style="color:#bf616a;">is_valid</span><span>(</span><span style="color:#bf616a;">raise_exception</span><span>=</span><span style="color:#d08770;">True</span><span>)
</span><span>        user = serializer.validated_data[&#39;</span><span style="color:#a3be8c;">user</span><span>&#39;]
</span><span>        </span><span style="color:#bf616a;">login</span><span>(request, user)
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">Response</span><span>(</span><span style="color:#d08770;">None</span><span>, </span><span style="color:#bf616a;">status</span><span>=status.</span><span style="color:#bf616a;">HTTP_202_ACCEPTED</span><span>)
</span></code></pre>
<p>Mount your view in the project urls.py:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>django.contrib </span><span style="color:#b48ead;">import </span><span>admin
</span><span style="color:#b48ead;">from </span><span>django.urls </span><span style="color:#b48ead;">import </span><span>path
</span><span style="color:#b48ead;">from . import </span><span>views
</span><span>urlpatterns = [
</span><span>    </span><span style="color:#bf616a;">path</span><span>(&#39;</span><span style="color:#a3be8c;">admin/</span><span>&#39;, admin.site.urls),
</span><span>    </span><span style="color:#bf616a;">path</span><span>(&#39;</span><span style="color:#a3be8c;">api/login/</span><span>&#39;, views.LoginView.</span><span style="color:#bf616a;">as_view</span><span>()),
</span><span>]
</span></code></pre>
<h2 id="the-session-and-django-settings">The Session and Django settings</h2>
<p>When it comes to security, tried-and-true technologies are often the best choice because they’ve had plenty of time to expose and fix vulnerabilities. If we set a few more settings in Django, we'll enable additional security:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#bf616a;">SESSION_COOKIE_HTTPONLY </span><span>= </span><span style="color:#d08770;">True
</span><span style="color:#bf616a;">SESSION_COOKIE_SECURE </span><span>= </span><span style="color:#d08770;">True
</span></code></pre>
<p>For further readings about Django's session framework <a href="https://docs.djangoproject.com/en/5.1/ref/settings/#sessions">see here</a></p>
<p>Now go to the login page in the front and enter the user name and the password and click on Login. If every thing went good you will see the <code>sessionid</code> and the <code>csrftoken</code> in the browser's <code>Devtools</code> -&gt; <code>Application</code> -&gt; <code>Cookies</code>:</p>
<table><thead><tr><th>Name</th><th>Value</th><th>Domain</th><th>Path</th><th>Expire/Max-Age</th><th>Size</th><th>HttpOnly</th><th>Secure</th><th>Samesite</th><th>Patrition key Site</th><th>Cross Site</th><th>Priority</th></tr></thead><tbody>
<tr><td>sessionid</td><td>p21pms0oohese5l5f77lx7vzhyi7vquk</td><td>django-session-app.localhost</td><td>/</td><td>2024-10-25T11:29:06.595Z</td><td>41</td><td>✓</td><td>✓</td><td>Lax</td><td></td><td></td><td>Medium</td></tr>
<tr><td>csrftoken</td><td>TMOR7cOrEqLrGd3C3FjxX684yyjacu3v</td><td>django-session-app.localhost</td><td>/</td><td>2024-10-25T11:29:06.595Z</td><td>41</td><td></td><td></td><td>Lax</td><td></td><td></td><td>Medium</td></tr>
</tbody></table>
<p>The user is correctly logged in and a session cookie named sessionid has been returned to our client. If we will persist that session cookie in each request, our user will be persistently authenticated.</p>
<h2 id="django-rest-framework-logout-endpoint">Django Rest Framework Logout endpoint</h2>
<p>Next, we'll wire up a few views that let us logout :</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>rest_framework </span><span style="color:#b48ead;">import </span><span>permissions
</span><span style="color:#b48ead;">from </span><span>rest_framework </span><span style="color:#b48ead;">import </span><span>views
</span><span style="color:#b48ead;">from </span><span>rest_framework.response </span><span style="color:#b48ead;">import </span><span>Response
</span><span style="color:#b48ead;">from </span><span>rest_framework </span><span style="color:#b48ead;">import </span><span>status
</span><span style="color:#b48ead;">from </span><span>django.contrib.auth </span><span style="color:#b48ead;">import </span><span>login,logout </span><span style="color:#65737e;">#new
</span><span style="color:#b48ead;">from . import </span><span>serializers
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">LoginView</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">views.APIView</span><span style="color:#eff1f5;">):
</span><span>    </span><span style="color:#65737e;"># This view should be accessible also for unauthenticated users.
</span><span>    permission_classes = (permissions.AllowAny,)
</span><span>
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">post</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">request</span><span>, </span><span style="color:#bf616a;">format</span><span>=</span><span style="color:#d08770;">None</span><span>):
</span><span>        serializer = serializers.</span><span style="color:#bf616a;">LoginSerializer</span><span>(</span><span style="color:#bf616a;">data</span><span>=</span><span style="color:#bf616a;">self</span><span>.request.data,
</span><span>            </span><span style="color:#bf616a;">context</span><span>={ &#39;</span><span style="color:#a3be8c;">request</span><span>&#39;: </span><span style="color:#bf616a;">self</span><span>.request })
</span><span>        serializer.</span><span style="color:#bf616a;">is_valid</span><span>(</span><span style="color:#bf616a;">raise_exception</span><span>=</span><span style="color:#d08770;">True</span><span>)
</span><span>        user = serializer.validated_data[&#39;</span><span style="color:#a3be8c;">user</span><span>&#39;]
</span><span>        </span><span style="color:#bf616a;">login</span><span>(request, user)
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">Response</span><span>(</span><span style="color:#d08770;">None</span><span>, </span><span style="color:#bf616a;">status</span><span>=status.</span><span style="color:#bf616a;">HTTP_202_ACCEPTED</span><span>)
</span><span>
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">LogoutView</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">views.APIView</span><span style="color:#eff1f5;">): </span><span style="color:#65737e;"># new
</span><span>    </span><span style="color:#65737e;"># This view should be accessible only for authenticated users.
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">post</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">request</span><span>, </span><span style="color:#bf616a;">format</span><span>=</span><span style="color:#d08770;">None</span><span>):
</span><span>        </span><span style="color:#bf616a;">logout</span><span>(request)
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">Response</span><span>(</span><span style="color:#d08770;">None</span><span>, </span><span style="color:#bf616a;">status</span><span>=status.</span><span style="color:#bf616a;">HTTP_202_ACCEPTED</span><span>)
</span></code></pre>
<p>Update the urls.py file like this:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>django.contrib </span><span style="color:#b48ead;">import </span><span>admin
</span><span style="color:#b48ead;">from </span><span>django.urls </span><span style="color:#b48ead;">import </span><span>path
</span><span style="color:#b48ead;">from . import </span><span>views
</span><span>urlpatterns = [
</span><span>    </span><span style="color:#bf616a;">path</span><span>(&#39;</span><span style="color:#a3be8c;">admin/</span><span>&#39;, admin.site.urls),
</span><span>    </span><span style="color:#bf616a;">path</span><span>(&#39;</span><span style="color:#a3be8c;">api/login/</span><span>&#39;, views.LoginView.</span><span style="color:#bf616a;">as_view</span><span>()),
</span><span>    </span><span style="color:#bf616a;">path</span><span>(&#39;</span><span style="color:#a3be8c;">api/logout/</span><span>&#39;, views.LogoutView.</span><span style="color:#bf616a;">as_view</span><span>()), </span><span style="color:#65737e;"># new
</span><span>]
</span></code></pre>
<p>And update the Login view in the front endlike this:</p>
<pre data-lang="html" style="background-color:#2b303b;color:#c0c5ce;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#bf616a;">template</span><span>&gt;
</span><span>  &lt;</span><span style="color:#bf616a;">v-app</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">v-main</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">v-container </span><span style="color:#d08770;">class</span><span>=&quot;</span><span style="color:#a3be8c;">fill-height</span><span>&quot;&gt;
</span><span>        &lt;</span><span style="color:#bf616a;">v-row </span><span style="color:#d08770;">justify</span><span>=&quot;</span><span style="color:#a3be8c;">center</span><span>&quot;&gt;
</span><span>          &lt;</span><span style="color:#bf616a;">v-col </span><span style="color:#d08770;">cols</span><span>=&quot;</span><span style="color:#a3be8c;">12</span><span>&quot; </span><span style="color:#d08770;">md</span><span>=&quot;</span><span style="color:#a3be8c;">3</span><span>&quot;&gt;
</span><span>            &lt;</span><span style="color:#bf616a;">v-card</span><span>&gt;
</span><span>              &lt;</span><span style="color:#bf616a;">v-card-text</span><span>&gt;
</span><span>                </span><span style="color:#65737e;">&lt;!-- new --&gt;
</span><span>                &lt;</span><span style="color:#bf616a;">v-btn </span><span style="color:#d08770;">class</span><span>=&quot;</span><span style="color:#a3be8c;">mb-3</span><span>&quot; </span><span style="color:#d08770;">block color</span><span>=&quot;</span><span style="color:#a3be8c;">error</span><span>&quot; </span><span style="color:#d08770;">@click</span><span>=&quot;</span><span style="color:#a3be8c;">logout</span><span>&quot; </span><span style="color:#d08770;">v-if</span><span>=&quot;</span><span style="color:#a3be8c;">isAuthenticated</span><span>&quot;&gt;Logout&lt;/</span><span style="color:#bf616a;">v-btn</span><span>&gt;
</span><span>                &lt;</span><span style="color:#bf616a;">v-form </span><span style="color:#d08770;">@submit.prevent</span><span>=&quot;</span><span style="color:#a3be8c;">login</span><span>&quot; </span><span style="color:#d08770;">v-if</span><span>=&quot;</span><span style="color:#a3be8c;">!isAuthenticated</span><span>&quot;&gt;
</span><span>                  &lt;</span><span style="color:#bf616a;">v-text-field </span><span style="color:#d08770;">v-model</span><span>=&quot;</span><span style="color:#a3be8c;">credentials.username</span><span>&quot; </span><span style="color:#d08770;">variant</span><span>=&quot;</span><span style="color:#a3be8c;">outlined</span><span>&quot; </span><span style="color:#d08770;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Username</span><span>&quot;&gt;&lt;/</span><span style="color:#bf616a;">v-text-field</span><span>&gt;
</span><span>                  &lt;</span><span style="color:#bf616a;">v-text-field </span><span style="color:#d08770;">v-model</span><span>=&quot;</span><span style="color:#a3be8c;">credentials.password</span><span>&quot; </span><span style="color:#d08770;">variant</span><span>=&quot;</span><span style="color:#a3be8c;">outlined</span><span>&quot; </span><span style="color:#d08770;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Password</span><span>&quot;&gt;&lt;/</span><span style="color:#bf616a;">v-text-field</span><span>&gt;
</span><span>                  &lt;</span><span style="color:#bf616a;">v-btn </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">submit</span><span>&quot; </span><span style="color:#d08770;">block color</span><span>=&quot;</span><span style="color:#a3be8c;">primary</span><span>&quot;&gt;Login&lt;/</span><span style="color:#bf616a;">v-btn</span><span>&gt;
</span><span>                &lt;/</span><span style="color:#bf616a;">v-form</span><span>&gt;
</span><span>              &lt;/</span><span style="color:#bf616a;">v-card-text</span><span>&gt;
</span><span>            &lt;/</span><span style="color:#bf616a;">v-card</span><span>&gt;
</span><span>          &lt;/</span><span style="color:#bf616a;">v-col</span><span>&gt;
</span><span>        &lt;/</span><span style="color:#bf616a;">v-row</span><span>&gt;
</span><span>      &lt;/</span><span style="color:#bf616a;">v-container</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">v-main</span><span>&gt;
</span><span>  &lt;/</span><span style="color:#bf616a;">v-app</span><span>&gt;
</span><span>&lt;/</span><span style="color:#bf616a;">template</span><span>&gt;
</span><span>
</span><span>&lt;</span><span style="color:#bf616a;">script </span><span style="color:#d08770;">setup</span><span>&gt;
</span><span style="color:#b48ead;">import </span><span>{ </span><span style="color:#bf616a;">reactive</span><span>, </span><span style="color:#bf616a;">ref </span><span>} </span><span style="color:#b48ead;">from </span><span>&#39;</span><span style="color:#a3be8c;">vue</span><span>&#39;;
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">isAuthenticated </span><span>= </span><span style="color:#bf616a;">ref</span><span>(</span><span style="color:#d08770;">false</span><span>)
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">credentials </span><span>= </span><span style="color:#bf616a;">reactive</span><span>({ username: &quot;&quot;, password: &quot;&quot; })
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">login </span><span>= () </span><span style="color:#b48ead;">=&gt; </span><span>{
</span><span>  </span><span style="color:#bf616a;">fetch</span><span>(&quot;</span><span style="color:#a3be8c;">/api/login/</span><span>&quot;,
</span><span>    {
</span><span>      method: &quot;</span><span style="color:#a3be8c;">POST</span><span>&quot;,
</span><span>      headers: {
</span><span>        &quot;</span><span style="color:#a3be8c;">Content-Type</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">application/json</span><span>&quot;,
</span><span>      },
</span><span>      body: JSON.</span><span style="color:#96b5b4;">stringify</span><span>(</span><span style="color:#bf616a;">credentials</span><span>)
</span><span>    }
</span><span>  ).</span><span style="color:#bf616a;">then</span><span>(response</span><span style="color:#b48ead;">=&gt;</span><span>{
</span><span>    </span><span style="color:#b48ead;">if</span><span>(</span><span style="color:#bf616a;">response</span><span>.ok){
</span><span>      </span><span style="color:#bf616a;">isAuthenticated</span><span>.value=</span><span style="color:#d08770;">true
</span><span>    }
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">response</span><span>.</span><span style="color:#bf616a;">json</span><span>()
</span><span>  })
</span><span>  .</span><span style="color:#bf616a;">then</span><span>(data</span><span style="color:#b48ead;">=&gt;</span><span>console.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">data</span><span>)
</span><span>  )
</span><span>}
</span><span style="color:#65737e;">// new
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">logout </span><span>= () </span><span style="color:#b48ead;">=&gt; </span><span>{
</span><span>  </span><span style="color:#bf616a;">fetch</span><span>(&quot;</span><span style="color:#a3be8c;">/api/logout/</span><span>&quot;,
</span><span>    {
</span><span>      method: &quot;</span><span style="color:#a3be8c;">POST</span><span>&quot;,
</span><span>      headers: {
</span><span>        &quot;</span><span style="color:#a3be8c;">Content-Type</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">application/json</span><span>&quot;,
</span><span>      }
</span><span>    }
</span><span>  ).</span><span style="color:#bf616a;">then</span><span>(response</span><span style="color:#b48ead;">=&gt;</span><span>{
</span><span>    </span><span style="color:#b48ead;">if</span><span>(</span><span style="color:#bf616a;">response</span><span>.ok){
</span><span>      </span><span style="color:#bf616a;">isAuthenticated</span><span>.value=</span><span style="color:#d08770;">false
</span><span>    }
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">response</span><span>.</span><span style="color:#bf616a;">json</span><span>()
</span><span>  })
</span><span>  .</span><span style="color:#bf616a;">then</span><span>(data</span><span style="color:#b48ead;">=&gt;</span><span>console.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">data</span><span>)
</span><span>  )
</span><span>}
</span><span>&lt;/</span><span style="color:#bf616a;">script</span><span>&gt;
</span></code></pre>
<p>Now clear the session cookies and login again, after that click on the logout button, we can see that we have an error in the console panel of the browser's Devtools.</p>
<pre data-lang="json" style="background-color:#2b303b;color:#c0c5ce;" class="language-json "><code class="language-json" data-lang="json"><span>{
</span><span>    &quot;</span><span style="color:#a3be8c;">detail</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">CSRF Failed: CSRF token missing.</span><span>&quot;
</span><span>}
</span></code></pre>
<h2 id="cross-site-request-forgery-protection-csrf">Cross Site Request Forgery protection (CSRF)</h2>
<p>from Django documentation:</p>
<blockquote>
<p><em>The CSRF middleware and template tag provides easy-to-use protection against Cross Site Request Forgeries. This type of attack occurs when a malicious website contains a link, a form button or some JavaScript that is intended to perform some action on your website, using the credentials of a logged-in user who visits the malicious site in their browser. A related type of attack, ‘login CSRF’, where an attacking site tricks a user’s browser into logging into a site with someone else’s credentials, is also covered. The first defense against CSRF attacks is to ensure that GET requests (and other ‘safe’ methods, as defined by RFC 9110#section-9.2.1) are side effect free. Requests via ‘unsafe’ methods, such as POST, PUT, and DELETE, can then be protected by the steps outlined in How to use Django’s CSRF protection.</em></p>
</blockquote>
<p>for further information <a href="https://docs.djangoproject.com/en/5.1/ref/csrf/">see here</a></p>
<p>So we have to include the <code>X-CSRFToken</code> value in the request header for all post requests, let's update the logout function,</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#8fa1b3;">logout </span><span>= () </span><span style="color:#b48ead;">=&gt; </span><span>{
</span><span>  </span><span style="color:#8fa1b3;">fetch</span><span>(&quot;</span><span style="color:#a3be8c;">/api/logout/</span><span>&quot;,
</span><span>    {
</span><span>      method: &quot;</span><span style="color:#a3be8c;">POST</span><span>&quot;,
</span><span>      headers: {
</span><span>        &quot;</span><span style="color:#a3be8c;">Content-Type</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">application/json</span><span>&quot;,
</span><span>        &quot;</span><span style="color:#a3be8c;">X-CSRFToken</span><span>&quot;:</span><span style="color:#8fa1b3;">getCsrfToken</span><span>() </span><span style="color:#65737e;">// new
</span><span>      }
</span><span>    }
</span><span>  ).</span><span style="color:#96b5b4;">then</span><span>(</span><span style="color:#bf616a;">response</span><span style="color:#b48ead;">=&gt;</span><span>{
</span><span>    </span><span style="color:#b48ead;">if</span><span>(</span><span style="color:#bf616a;">response</span><span>.</span><span style="color:#bf616a;">ok</span><span>){
</span><span>      </span><span style="color:#bf616a;">isAuthenticated</span><span>.value=</span><span style="color:#d08770;">false
</span><span>    }
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">response</span><span>.</span><span style="color:#8fa1b3;">json</span><span>()
</span><span>  })
</span><span>  .</span><span style="color:#96b5b4;">then</span><span>(</span><span style="color:#bf616a;">data</span><span style="color:#b48ead;">=&gt;</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">data</span><span>)
</span><span>  )
</span><span>}
</span><span style="color:#65737e;">// new
</span><span style="color:#b48ead;">const </span><span style="color:#8fa1b3;">getCsrfToken </span><span>= () </span><span style="color:#b48ead;">=&gt; </span><span>{
</span><span>  </span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">cookie </span><span>= document.cookie.</span><span style="color:#96b5b4;">split</span><span>(&#39;</span><span style="color:#a3be8c;">;</span><span>&#39;)[</span><span style="color:#d08770;">0</span><span>];
</span><span>  </span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">value </span><span>= </span><span style="color:#bf616a;">cookie</span><span>.</span><span style="color:#96b5b4;">split</span><span>(&quot;</span><span style="color:#a3be8c;">=</span><span>&quot;)[</span><span style="color:#d08770;">1</span><span>]
</span><span>  </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">value
</span><span>}
</span></code></pre>
<p>You can see, when you click on the logout button, every thing goes as you want.</p>
<h2 id="get-data-with-authenticated-user">Get data with authenticated user</h2>
<p>Now we will add a view to our backend, only authenticated users will se a message say Hello, add to views.py file the following lines:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">SayHello</span><span style="color:#eff1f5;">(</span><span style="color:#a3be8c;">views.APIView</span><span style="color:#eff1f5;">):
</span><span>    </span><span style="color:#65737e;"># This view should be accessible only for authenticated users.
</span><span>    </span><span style="color:#b48ead;">def </span><span style="color:#8fa1b3;">get</span><span>(</span><span style="color:#bf616a;">self</span><span>, </span><span style="color:#bf616a;">request</span><span>, </span><span style="color:#bf616a;">format</span><span>=</span><span style="color:#d08770;">None</span><span>):
</span><span>        username = request.user.username
</span><span>        </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">Response</span><span>({&quot;</span><span style="color:#a3be8c;">message</span><span>&quot;:</span><span style="color:#b48ead;">f</span><span>&quot;</span><span style="color:#a3be8c;">Hello </span><span>{username}&quot;}, </span><span style="color:#bf616a;">status</span><span>=status.</span><span style="color:#bf616a;">HTTP_202_ACCEPTED</span><span>)
</span></code></pre>
<p>In the urls.py file:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span style="color:#b48ead;">from </span><span>django.contrib </span><span style="color:#b48ead;">import </span><span>admin
</span><span style="color:#b48ead;">from </span><span>django.urls </span><span style="color:#b48ead;">import </span><span>path
</span><span style="color:#b48ead;">from . import </span><span>views
</span><span>urlpatterns = [
</span><span>    </span><span style="color:#bf616a;">path</span><span>(&#39;</span><span style="color:#a3be8c;">admin/</span><span>&#39;, admin.site.urls),
</span><span>    </span><span style="color:#bf616a;">path</span><span>(&#39;</span><span style="color:#a3be8c;">api/login/</span><span>&#39;, views.LoginView.</span><span style="color:#bf616a;">as_view</span><span>()),
</span><span>    </span><span style="color:#bf616a;">path</span><span>(&#39;</span><span style="color:#a3be8c;">api/logout/</span><span>&#39;, views.LogoutView.</span><span style="color:#bf616a;">as_view</span><span>()),
</span><span>    </span><span style="color:#bf616a;">path</span><span>(&#39;</span><span style="color:#a3be8c;">api/hello/</span><span>&#39;, views.SayHello.</span><span style="color:#bf616a;">as_view</span><span>()), </span><span style="color:#65737e;"># new
</span><span>]
</span></code></pre>
<p>And finally the login view</p>
<pre data-lang="html" style="background-color:#2b303b;color:#c0c5ce;" class="language-html "><code class="language-html" data-lang="html"><span>&lt;</span><span style="color:#bf616a;">template</span><span>&gt;
</span><span>  &lt;</span><span style="color:#bf616a;">v-app</span><span>&gt;
</span><span>    &lt;</span><span style="color:#bf616a;">v-main</span><span>&gt;
</span><span>      &lt;</span><span style="color:#bf616a;">v-container </span><span style="color:#d08770;">class</span><span>=&quot;</span><span style="color:#a3be8c;">fill-height</span><span>&quot;&gt;
</span><span>        &lt;</span><span style="color:#bf616a;">v-row </span><span style="color:#d08770;">justify</span><span>=&quot;</span><span style="color:#a3be8c;">center</span><span>&quot;&gt;
</span><span>          &lt;</span><span style="color:#bf616a;">v-col </span><span style="color:#d08770;">cols</span><span>=&quot;</span><span style="color:#a3be8c;">12</span><span>&quot; </span><span style="color:#d08770;">md</span><span>=&quot;</span><span style="color:#a3be8c;">3</span><span>&quot;&gt;
</span><span>            &lt;</span><span style="color:#bf616a;">v-card</span><span>&gt;
</span><span>              &lt;</span><span style="color:#bf616a;">v-card-text</span><span>&gt;
</span><span>                </span><span style="color:#65737e;">&lt;!-- new --&gt;
</span><span>                &lt;</span><span style="color:#bf616a;">v-btn </span><span style="color:#d08770;">class</span><span>=&quot;</span><span style="color:#a3be8c;">mb-3</span><span>&quot; </span><span style="color:#d08770;">block color</span><span>=&quot;</span><span style="color:#a3be8c;">error</span><span>&quot; </span><span style="color:#d08770;">@click</span><span>=&quot;</span><span style="color:#a3be8c;">logout</span><span>&quot; </span><span style="color:#d08770;">v-if</span><span>=&quot;</span><span style="color:#a3be8c;">isAuthenticated</span><span>&quot;&gt;Logout&lt;/</span><span style="color:#bf616a;">v-btn</span><span>&gt;
</span><span>                </span><span style="color:#65737e;">&lt;!-- new --&gt;
</span><span>                &lt;</span><span style="color:#bf616a;">h1 </span><span style="color:#d08770;">class</span><span>=&quot;</span><span style="color:#a3be8c;">title</span><span>&quot;&gt;{{ message }}&lt;/</span><span style="color:#bf616a;">h1</span><span>&gt;
</span><span>                &lt;</span><span style="color:#bf616a;">v-form </span><span style="color:#d08770;">@submit.prevent</span><span>=&quot;</span><span style="color:#a3be8c;">login</span><span>&quot; </span><span style="color:#d08770;">v-if</span><span>=&quot;</span><span style="color:#a3be8c;">!isAuthenticated</span><span>&quot;&gt;
</span><span>                  &lt;</span><span style="color:#bf616a;">v-text-field </span><span style="color:#d08770;">v-model</span><span>=&quot;</span><span style="color:#a3be8c;">credentials.username</span><span>&quot; </span><span style="color:#d08770;">variant</span><span>=&quot;</span><span style="color:#a3be8c;">outlined</span><span>&quot; </span><span style="color:#d08770;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Username</span><span>&quot;&gt;&lt;/</span><span style="color:#bf616a;">v-text-field</span><span>&gt;
</span><span>                  &lt;</span><span style="color:#bf616a;">v-text-field </span><span style="color:#d08770;">v-model</span><span>=&quot;</span><span style="color:#a3be8c;">credentials.password</span><span>&quot; </span><span style="color:#d08770;">variant</span><span>=&quot;</span><span style="color:#a3be8c;">outlined</span><span>&quot; </span><span style="color:#d08770;">label</span><span>=&quot;</span><span style="color:#a3be8c;">Password</span><span>&quot;&gt;&lt;/</span><span style="color:#bf616a;">v-text-field</span><span>&gt;
</span><span>                  &lt;</span><span style="color:#bf616a;">v-btn </span><span style="color:#d08770;">type</span><span>=&quot;</span><span style="color:#a3be8c;">submit</span><span>&quot; </span><span style="color:#d08770;">block color</span><span>=&quot;</span><span style="color:#a3be8c;">primary</span><span>&quot;&gt;Login&lt;/</span><span style="color:#bf616a;">v-btn</span><span>&gt;
</span><span>                &lt;/</span><span style="color:#bf616a;">v-form</span><span>&gt;
</span><span>              &lt;/</span><span style="color:#bf616a;">v-card-text</span><span>&gt;
</span><span>            &lt;/</span><span style="color:#bf616a;">v-card</span><span>&gt;
</span><span>          &lt;/</span><span style="color:#bf616a;">v-col</span><span>&gt;
</span><span>        &lt;/</span><span style="color:#bf616a;">v-row</span><span>&gt;
</span><span>      &lt;/</span><span style="color:#bf616a;">v-container</span><span>&gt;
</span><span>    &lt;/</span><span style="color:#bf616a;">v-main</span><span>&gt;
</span><span>  &lt;/</span><span style="color:#bf616a;">v-app</span><span>&gt;
</span><span>&lt;/</span><span style="color:#bf616a;">template</span><span>&gt;
</span><span>
</span><span>&lt;</span><span style="color:#bf616a;">script </span><span style="color:#d08770;">setup</span><span>&gt;
</span><span style="color:#b48ead;">import </span><span>{ </span><span style="color:#bf616a;">reactive</span><span>, </span><span style="color:#bf616a;">ref </span><span>} </span><span style="color:#b48ead;">from </span><span>&#39;</span><span style="color:#a3be8c;">vue</span><span>&#39;;
</span><span>
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">message </span><span>= </span><span style="color:#bf616a;">ref</span><span>(&quot;&quot;)
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">isAuthenticated </span><span>= </span><span style="color:#bf616a;">ref</span><span>(</span><span style="color:#d08770;">false</span><span>)
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">credentials </span><span>= </span><span style="color:#bf616a;">reactive</span><span>({ username: &quot;&quot;, password: &quot;&quot; })
</span><span>
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">login </span><span>= () </span><span style="color:#b48ead;">=&gt; </span><span>{
</span><span>  </span><span style="color:#bf616a;">fetch</span><span>(&quot;</span><span style="color:#a3be8c;">/api/login/</span><span>&quot;,
</span><span>    {
</span><span>      method: &quot;</span><span style="color:#a3be8c;">POST</span><span>&quot;,
</span><span>      headers: {
</span><span>        &quot;</span><span style="color:#a3be8c;">Content-Type</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">application/json</span><span>&quot;,
</span><span>      },
</span><span>      body: JSON.</span><span style="color:#96b5b4;">stringify</span><span>(</span><span style="color:#bf616a;">credentials</span><span>)
</span><span>    }
</span><span>  ).</span><span style="color:#bf616a;">then</span><span>(response</span><span style="color:#b48ead;">=&gt;</span><span>{
</span><span>    </span><span style="color:#b48ead;">if</span><span>(</span><span style="color:#bf616a;">response</span><span>.ok){
</span><span>      </span><span style="color:#bf616a;">isAuthenticated</span><span>.value=</span><span style="color:#d08770;">true
</span><span>      </span><span style="color:#bf616a;">sayHello</span><span>()
</span><span>    }
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">response</span><span>.</span><span style="color:#bf616a;">json</span><span>()
</span><span>  })
</span><span>  .</span><span style="color:#bf616a;">then</span><span>(data</span><span style="color:#b48ead;">=&gt;</span><span>console.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">data</span><span>)
</span><span>  )
</span><span>}
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">sayHello </span><span>= () </span><span style="color:#b48ead;">=&gt; </span><span>{
</span><span>  </span><span style="color:#bf616a;">fetch</span><span>(&quot;</span><span style="color:#a3be8c;">/api/hello/</span><span>&quot;,
</span><span>    {
</span><span>      method: &quot;</span><span style="color:#a3be8c;">GET</span><span>&quot;,
</span><span>      headers: {
</span><span>        &quot;</span><span style="color:#a3be8c;">Content-Type</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">application/json</span><span>&quot;,
</span><span>      },
</span><span>    }
</span><span>  ).</span><span style="color:#bf616a;">then</span><span>(response</span><span style="color:#b48ead;">=&gt;</span><span style="color:#bf616a;">response</span><span>.</span><span style="color:#bf616a;">json</span><span>())
</span><span>  .</span><span style="color:#bf616a;">then</span><span>(data</span><span style="color:#b48ead;">=&gt;</span><span>{
</span><span>    </span><span style="color:#bf616a;">message</span><span>.value = </span><span style="color:#bf616a;">data</span><span>.message
</span><span>  }
</span><span>  )
</span><span>}
</span><span style="color:#65737e;">//new
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">logout </span><span>= () </span><span style="color:#b48ead;">=&gt; </span><span>{
</span><span>  </span><span style="color:#bf616a;">fetch</span><span>(&quot;</span><span style="color:#a3be8c;">/api/logout/</span><span>&quot;,
</span><span>    {
</span><span>      method: &quot;</span><span style="color:#a3be8c;">POST</span><span>&quot;,
</span><span>      headers: {
</span><span>        &quot;</span><span style="color:#a3be8c;">Content-Type</span><span>&quot;: &quot;</span><span style="color:#a3be8c;">application/json</span><span>&quot;,
</span><span>        &quot;</span><span style="color:#a3be8c;">X-CSRFToken</span><span>&quot;:</span><span style="color:#bf616a;">getCsrfToken</span><span>() </span><span style="color:#65737e;">// new
</span><span>      }
</span><span>    }
</span><span>  ).</span><span style="color:#bf616a;">then</span><span>(response</span><span style="color:#b48ead;">=&gt;</span><span>{
</span><span>    </span><span style="color:#b48ead;">if</span><span>(</span><span style="color:#bf616a;">response</span><span>.ok){
</span><span>      </span><span style="color:#bf616a;">isAuthenticated</span><span>.value=</span><span style="color:#d08770;">false
</span><span>    }
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">response</span><span>.</span><span style="color:#bf616a;">json</span><span>()
</span><span>  })
</span><span>  .</span><span style="color:#bf616a;">then</span><span>(data</span><span style="color:#b48ead;">=&gt;</span><span>console.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">data</span><span>)
</span><span>  )
</span><span>}
</span><span>
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">getCsrfToken </span><span>= () </span><span style="color:#b48ead;">=&gt; </span><span>{
</span><span>  </span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">cookie </span><span>= document.cookie.</span><span style="color:#bf616a;">split</span><span>(&#39;</span><span style="color:#a3be8c;">;</span><span>&#39;)[</span><span style="color:#d08770;">0</span><span>];
</span><span>  </span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">value </span><span>= </span><span style="color:#bf616a;">cookie</span><span>.</span><span style="color:#bf616a;">split</span><span>(&quot;</span><span style="color:#a3be8c;">=</span><span>&quot;)[</span><span style="color:#d08770;">1</span><span>]
</span><span>  </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">value
</span><span>}
</span><span>&lt;/</span><span style="color:#bf616a;">script</span><span>&gt;
</span></code></pre>
<h2 id="result">Result</h2>
<div align="center">
<img src="/session-login.gif" width="100%"/>
</div>
<h2 id="final-words">Final words</h2>
<p>In this article, you learned how to set up authentication for a Django Rest Framework (DRF) application using Django's built-in session framework. This method works well if you have control over both the frontend and backend, and they are served under the same primary domain. In such cases, browser cookies can effectively maintain the user session across multiple requests. This assumption is often valid, and using this approach is generally simpler to implement compared to token-based authentication methods.</p>
<p>Be sure to check out my example project on <a href="https://github.com/malnossi/django-session-app">Github</a>, either clone or fork it to see how everything works in practice.</p>
<p>Enjoy working with Django Rest Framework!</p>

          </div>
        </div>
      </div>
</div>

    <footer class="footer">
    <div class="has-text-centered">
        Mohamed AL NOSSIRAT <span id="date"></span>
    </div>
</footer>
<script lang="js">
    window.onload = () => {
        const date = new Date().getFullYear()
        document.querySelector("#date").textContent = date;
    }
</script>
    <script lang="js" src='https://malnossi.github.io/script.js'></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8LBRDGLXJV" defer></script>
    <script defer>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-8LBRDGLXJV');
    </script>
</body>

</html>